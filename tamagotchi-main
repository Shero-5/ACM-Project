package main;

import java.util.ArrayList;
import javafx.animation.AnimationTimer;
import javafx.application.Application;
import javafx.application.Platform;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Pane;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.stage.Stage;

@SuppressWarnings("unused")
public class tomogachi extends Application {
	
	public static final int WIDTH = 1280;
	public static final int HEIGHT = 720;
	
	protected Font font = new Font("Georgia", 40);
	private static Pets selectedPet;
	
	public void start(Stage primaryStage) {
		
		GridPane backPane = new GridPane();
		// Sets the background image
		Image image = new Image("https://t4.ftcdn.net/jpg/02/77/10/87/360_F_277108701_1JAbS8jg7Gw42dU6nz7sF72bWiCm3VMv.jpg");
		ImageView background = new ImageView(image);
		// Sets background dimensions
		background.setFitHeight(HEIGHT);
		background.setPreserveRatio(true);
		background.setMouseTransparent(true);
		// Adds background to the pane
		backPane.add(background, 0, 0);
		
		// Creates the starter images
		Image starter1 = new Image("https://images.vexels.com/media/users/3/291355/isolated/preview/d57f402edfa16f981c7bdef1dc1b518a-cute-bunny-jumping-character.png");
		ImageView st1 = new ImageView(starter1);
		Image starter2 = new Image("https://png.pngtree.com/png-vector/20231031/ourmid/pngtree-revolutionary-war-flintlock-pistol-vintage-png-image_10411050.png");
		ImageView st2 = new ImageView(starter2);
		Image starter3 = new Image("https://png.pngtree.com/png-clipart/20250523/original/pngtree-golden-retriever-puppy-dog-sitting-looking-happy-friendly-pet-png-image_21058512.png");
		ImageView st3 = new ImageView(starter3);
		
		// Sets starter image sizes
		double starterWidth = 250;
		double starterHeight = 250;
		
		st1.setFitWidth(starterWidth);
		st1.setFitHeight(starterHeight);
		st1.setPreserveRatio(true);
		
		st2.setFitWidth(starterWidth);
		st2.setFitHeight(starterHeight);
		st2.setPreserveRatio(true);
		
		st3.setFitWidth(starterWidth);
		st3.setFitHeight(starterHeight);
		st3.setPreserveRatio(true);
		
		// Creates frame for starter images
		Rectangle frame1 = new Rectangle(starterHeight, starterWidth);
		frame1.setFill(Color.WHITE);
		frame1.setStroke(Color.BLACK);
		Rectangle frame2 = new Rectangle(starterHeight, starterWidth);
		frame2.setFill(Color.WHITE);
		frame2.setStroke(Color.BLACK);
		Rectangle frame3 = new Rectangle(starterHeight, starterWidth);
		frame3.setFill(Color.WHITE);
		frame3.setStroke(Color.BLACK);
		StackPane st1Frame = new StackPane(frame1, st1);
		StackPane st2Frame = new StackPane(frame2, st2);
		StackPane st3Frame = new StackPane(frame3, st3);
		
		
		// Creates the buttons to select a starter
		Button bt1 = new Button("Starter 1");
		Button bt2 = new Button("Starter 2");
		Button bt3 = new Button("Starter 3");
		// Sets fonts
		bt1.setFont(font);
		bt2.setFont(font);
		bt3.setFont(font);
		
		
		// Creates the pane that will be in the front
		GridPane frontPane = new GridPane();
		// Sets frontPane's spacing
		frontPane.setPadding(new Insets(200, 200, 200, 200));
		frontPane.setHgap(200);
		frontPane.setVgap(50);
		
		// adds images
		frontPane.add(st1Frame, 0, 0);
		frontPane.add(st2Frame, 1, 0);
		frontPane.add(st3Frame, 2, 0);
		// adds buttons beneath the images
		frontPane.add(bt1, 0, 1);
		frontPane.add(bt2, 1, 1);
		frontPane.add(bt3, 2, 1);
		
		Text txt = new Text("Select Your Dude");
		txt.setFont(font);
		Rectangle txtFrame = new Rectangle(350, 75);
		txtFrame.setFill(Color.WHITE);
		txtFrame.setStroke(Color.BLACK);
		StackPane txtPane = new StackPane(txtFrame, txt);
		
		// Combines the two panes one on top of the other
		StackPane stack1 = new StackPane();
		stack1.getChildren().addAll(backPane, txtPane, frontPane);
		StackPane.setAlignment(txt, Pos.TOP_CENTER);
		StackPane.setMargin(txt, new Insets(50, 0, 0, 0));
		StackPane.setAlignment(txtFrame, Pos.TOP_CENTER);
		StackPane.setMargin(txtFrame, new Insets(37.5, 0, 0, 0));
		
		
		Scene scene = new Scene(stack1, WIDTH, HEIGHT);
		
		primaryStage.setResizable(false);
		// Sets the stage details
		primaryStage.setTitle("Tamagachi");
		primaryStage.setScene(scene);
		primaryStage.show();

		// Event Handlers for the buttons
		bt1.setOnAction(e -> {
			selectedPet = new IceCreamBunny("tempName");
			primaryStage.setScene(mainScene(primaryStage));
		});
		bt2.setOnAction(e -> {
			selectedPet = new Gun("tempName");
			primaryStage.setScene(mainScene(primaryStage));
		});
		bt3.setOnAction(e -> {
			selectedPet = new Puppy("tempName");
			primaryStage.setScene(mainScene(primaryStage));
		});
	}
	
	public static Scene anvilDeath(Image pet) {
		System.out.print("working");
		
		ImageView starter = new ImageView(pet);
		Image anvil = new Image("https://www.onlygfx.com/wp-content/uploads/2021/12/vintage-anvil.png");
		ImageView anvilView = new ImageView(anvil);
		
		VBox squish = new VBox(anvilView, starter);
		
		
		Scene scene = new Scene(squish, WIDTH, HEIGHT);
		return scene;
	}
	
	public static Scene mainScene(Stage stage) {
		GridPane backPane = new GridPane();
		// Sets the background image
		Image image = new Image("https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/2839430/ss_6defaa9794b62474d32cb0265ca1a7459a9a11d8.1920x1080.jpg?t=1711449173");
		ImageView background = new ImageView(image);
		// Sets background dimensions
		background.setFitHeight(HEIGHT);
		background.setPreserveRatio(true);
		background.setMouseTransparent(true);
				
		ImageView starterImage = new ImageView();
		if (selectedPet instanceof IceCreamBunny) {
			starterImage.setImage(new Image("https://images.vexels.com/media/users/3/291355/isolated/preview/d57f402edfa16f981c7bdef1dc1b518a-cute-bunny-jumping-character.png"));
		} else if (selectedPet instanceof Gun) {
			starterImage.setImage(new Image("https://png.pngtree.com/png-vector/20231031/ourmid/pngtree-revolutionary-war-flintlock-pistol-vintage-png-image_10411050.png"));
		} else if (selectedPet instanceof Puppy) {
			starterImage.setImage(new Image("https://png.pngtree.com/png-clipart/20250523/original/pngtree-golden-retriever-puppy-dog-sitting-looking-happy-friendly-pet-png-image_21058512.png"));
		}
		double starterWidth = 250;
		double starterHeight = 250;
		
		starterImage.setFitWidth(starterWidth);
		starterImage.setFitHeight(starterHeight);
		starterImage.setPreserveRatio(true);
		
		
		AnimationTimer starterTimer = new AnimationTimer() {
			double currPos = 0;
			double speed = 0.8;
			
			public void handle(long now) {
				currPos += speed;
				starterImage.setTranslateX(currPos);
				if (currPos > 400 || currPos < -400) {
					speed = -speed;
					starterImage.setScaleX(-1);
				}
			}
		};
		starterTimer.start();
		
		StackPane layout = new StackPane(background, starterImage);
		Scene scene = new Scene(layout, WIDTH, HEIGHT);
		StackPane.setAlignment(starterImage, Pos.BOTTOM_CENTER);
		starterImage.setTranslateY(-45);
		return scene;
	}
	
	public static void main(String[] args) {
		launch(args);
	}
}
